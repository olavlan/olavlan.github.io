---
ssb:
    path:
    title: "Klimadata: temperatur og CO2 over tid"
    authors:
        - name: Fornavn Etternavn
          email: ---.ssb@no
    ingress: "En statistisk gjennomgang av et enkelt klimadatsett som inneholder årstall, gjennomsnittstemperatur og atmosfærisk CO₂. Artikkelen viser hvordan du kan laste inn data med pandas, lage visualiseringer og tolke trender og sammenhenger."
---
```{python}
import ssb_pubmd as ssb
```
```{python}
import pandas as pd

# Les inn CSV (bytt ut filsti med din fil)
df = pd.read_csv("path/to/your_file.csv")

# Sørg for at vi har riktige kolonner
df = df[['year', 'temperature', 'co2']].copy()

# Konverter year til heltall, sorter og fjern ufullstendige rader
df['year'] = pd.to_numeric(df['year'], errors='coerce')
df = df.dropna(subset=['year']).sort_values('year')
df['year'] = df['year'].astype(int)

# Valgfritt: beregn rullende gjennomsnitt for å glatte kurvene
# df['temp_roll10'] = df['temperature'].rolling(window=10, min_periods=1).mean()
# df['co2_roll10'] = df['co2'].rolling(window=10, min_periods=1).mean()

# df er dataframe som brukes i highchartet
print(df.head())


highchart = ssb.Highchart(
    title="Årlig temperatur og CO₂",
    graph_type="line",
    dataframe=df,
    xlabel="År",
    ylabel="Temperatur (°C) / CO₂ (ppm)",
)
ssb.create("hc:temp_co2", highchart)
```
```{python}
factbox = ssb.Factbox(
    title="Datasett – raskfakta",
    display_type="aiIcon",
)
ssb.create("fb:dataset_info", factbox)
```

Innledning

Klimaendringer er et komplekst system der økende konsentrasjoner av drivhusgasser som CO₂ henger sammen med endringer i global temperatur. Her analyserer vi et enkelt datasett med kolonnene 'year', 'temperature' og 'co2'. Formålet er å vise hvordan man kan beskrive dataene, visualisere utviklingen over tid og vurdere sammenhenger mellom temperatur og CO₂.

Datagrunnlag og metode

Datasettet forventes å ha tre kolonner:
- year: årstall (f.eks. 1980, 1990, ...)
- temperature: gjennomsnittlig temperatur (enhet avhengig av kilden, f.eks. °C eller avvik fra en baseline)
- co2: CO₂-konsentrasjon i atmosfæren (vanligvis i ppm)

Vi bruker pandas for å lese CSV-filen (se koden under for highchart) og gjør en enkel forbehandling: sikre riktig datatype for år, sortere etter år og fjerne rader med manglende år.

Beskrivende statistikk (eksempel)

Du kan få en rask oversikt med pandas:

```python
# Eksempel på beskrivende statistikk
import pandas as pd

df = pd.read_csv("path/to/your_file.csv")
df = df[['year','temperature','co2']].copy()
df['year'] = pd.to_numeric(df['year'], errors='coerce')
df = df.dropna(subset=['year']).sort_values('year')
df['year'] = df['year'].astype(int)

print(df.describe())
```

Tidsserier og glatting

For å gjøre trender tydeligere kan du beregne rullende gjennomsnitt:

```python
# 10-års rullerende gjennomsnitt
df['temp_roll10'] = df['temperature'].rolling(window=10, min_periods=1).mean()
df['co2_roll10'] = df['co2'].rolling(window=10, min_periods=1).mean()
```

Sammenheng mellom temperatur og CO₂

En rask korrelasjonsberegning kan gi en indikasjon på lineær sammenheng:

```python
corr = df[['temperature','co2']].corr().iloc[0,1]
print(f"Korrelasjon mellom temperatur og CO2: {corr:.3f}")
```

For mer formell analyse kan du bruke en enkel lineær regresjon eller tidsserieanalyse (for eksempel ARIMA eller en trend-dekomponering). Husk at korrelasjon ikke er det samme som årsakssammenheng — flere faktorer påvirker klimaet, og tidsserieegenskaper (autokorrelasjon, fellestrender) må håndteres.

Tolkning og begrensninger

- En positiv korrelasjon mellom CO₂ og temperatur støtter hypotesen om at økte klimagasskonsentrasjoner er assosiert med høyere temperaturer, men denne analysen alene kan ikke bevise årsak.
- Datasettets enheter, dekning og kvalitet (f.eks. globale gjennomsnitt vs. lokale målinger) påvirker tolkningen.
- Manglende data, endringer i målemetode eller kort tidsserie gjør konklusjoner mindre robuste.

Anbefalinger videre

- Utfør en mer formell tidsserieanalyse (trend + syklisk komponent) og test for stasjonaritet.
- Inkluder flere forklaringsvariabler (f.eks. aerosoler, solaktivitet, El Niño-indekser) for å avgrense effekten av CO₂.
- Bruk konfidensintervaller og statistiske tester for å kvantifisere usikkerhet.


::: { #hc:temp_co2 .ssb }
:::

::: { #fb:dataset_info .ssb }
- Kolonner: 'year' (år), 'temperature' (gjennomsnittstemperatur), 'co2' (CO₂ i ppm)
- Forventet forbehandling: konvertere 'year' til numerisk, sortere etter år og håndtere manglende verdier
- Viktige sjekker: min/max år, antall observasjoner (n = df.shape[0]), andel manglende verdier per kolonne
- Tips: Kontroller enheter for temperatur (°C eller avvik) før tolkning

:::

